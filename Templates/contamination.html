<!DOCTYPE html>
<html>
<head>
    <title>Contaminant Adulteration Detection</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Contaminant Adulteration Detection</h1>
    <h2>Results:</h2>
    <div>
        <p>Percentage of Red Contaminant Adulteration: <span id="red_percentage">{{red_percentage}}</span></p>
        <p>Percentage of Blue Contaminant Adulteration: <span id="blue_percentage">{{blue_percentage}}</span></p>
        <p>Percentage of Green Contaminant Adulteration: <span id="green_percentage">{{green_percentage}}</span></p>
        <p>Percentage of Yellow Contaminant Adulteration: <span id="yellow_percentage">{{yellow_percentage}}</span></p>
        <p>Date and Time: <span id="datetime"></span></p>
    </div>

    <h2>Pie Chart of Contaminant Percentages</h2>
    <canvas id="contaminantChart" width="10" height="10"></canvas>

    <script>
        function updateDateTime() {
            var now = new Date();
            var datetimeSpan = document.getElementById('datetime');
            datetimeSpan.innerText = now.toISOString();
        }
        setInterval(updateDateTime, 1000);

        // JavaScript code to create and render the pie chart
        var redPercentage = parseFloat("{{red_percentage}}");
        var bluePercentage = parseFloat("{{blue_percentage}}");
        var greenPercentage = parseFloat("{{green_percentage}}");
        var yellowPercentage = parseFloat("{{yellow_percentage}}");

        var ctx = document.getElementById('contaminantChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Red', 'Blue', 'Green', 'Yellow'],
                datasets: [{
                    data: [redPercentage, bluePercentage, greenPercentage, yellowPercentage],
                    backgroundColor: ['red', 'blue', 'green', 'yellow'],
                }],
            },
        });
    </script>
</body>
</html>
